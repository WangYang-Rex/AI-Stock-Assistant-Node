# 股票价格监控工具

基于东方财富非官方API的股票价格监控工具集合。

## 📁 文件说明

- `588080.js` - 科创50ETF(588080)实时价格监控脚本
- `eastmoney.md` - 东方财富API接口文档
- `网格交易自动化脚本.py` - 网格交易自动化Python脚本
- `投资组合收益跟踪表.xlsx` - 投资组合Excel跟踪表

## 🚀 快速开始

### 安装依赖

Node.js 脚本无需额外依赖，使用内置的 `http/https` 模块。

### 运行示例

```bash
# 获取科创50ETF(588080)今日价格动态
node 588080.js
```

## 📊 588080.js 功能说明

### 主要功能

1. **股票基本信息**
   - 最新价、涨跌幅、涨跌额
   - 今开、昨收、最高、最低
   - 成交量、成交额、换手率、振幅

2. **实时分时数据**
   - 每分钟价格动态
   - 成交量和成交额
   - 均价和涨跌幅
   - 完整的交易日价格走势

### 输出示例

```
🚀 开始获取科创50ETF(588080)实时数据...

╔══════════════════════════════════════════╗
║         📊 股票基本信息                   ║
╚══════════════════════════════════════════╝
  代码: 588080 | 名称: 科创50ETF
  最新价: 1.455 元
  涨跌幅: 📉 -0.82%
  涨跌额: -0.012 元
  今开: 1.455 | 昨收: 1.467
  最高: 1.482 | 最低: 1.446
  振幅: 2.45%
  成交量: 103691 手
  成交额: 151709.12 万元
  换手率: 1.23%

╔══════════════════════════════════════════╗
║         📈 今日分时价格动态               ║
╚══════════════════════════════════════════╝
  昨收价: 1.467 元

  时间    |  价格   | 涨跌幅  |  均价   | 成交量(手) | 成交额(万)
  --------|---------|---------|---------|-----------|----------
  09:30 | 1.467 | +0.00% | 1.467 | 0 | 0.00
  ...
  15:00 | 1.455 | -0.82% | 1.463 | 166 | 241.95

  ℹ️  共 256 个数据点 (显示最新 10 条)
```

## 🔧 自定义配置

你可以修改 `588080.js` 中的配置来监控其他股票：

```javascript
const CONFIG = {
  STOCK_CODE: '588080',  // 修改为其他股票代码
  MARKET_CODE: '1',      // 0=深交所，1=上交所/科创板
  UT: 'bd1d9ddb04089700cf9c27f6f7426281',
  REQUEST_DELAY: 1000,   // 请求间隔(毫秒)
};
```

### 市场代码说明

| 代码 | 市场 |
|------|------|
| 0 | 深交所A股 / 创业板 |
| 1 | 上交所A股 / 科创板 |
| 116 | 港股 |
| 105 | 美股 |

### 股票代码示例

```javascript
// 上交所股票
STOCK_CODE: '600588', MARKET_CODE: '1'

// 深交所股票
STOCK_CODE: '002230', MARKET_CODE: '0'

// 科创板股票
STOCK_CODE: '688001', MARKET_CODE: '1'

// 创业板股票
STOCK_CODE: '300001', MARKET_CODE: '0'
```

## 📝 API 接口说明

本工具使用了以下东方财富API接口：

### 1. 股票基本信息接口

```
http://push2.eastmoney.com/api/qt/stock/get
```

返回字段：
- `f2` - 最新价
- `f3` - 涨跌幅(%)
- `f4` - 涨跌额
- `f5` - 成交量(手)
- `f6` - 成交额
- `f7` - 振幅(%)
- `f8` - 换手率(%)
- `f15` - 最高价
- `f16` - 最低价
- `f17` - 今开价
- `f18` - 昨收价

### 2. 实时分时数据接口

```
http://push2.eastmoney.com/api/qt/stock/trends2/get
```

返回当日每分钟的：
- 时间戳
- 价格
- 成交量
- 成交额
- 均价

## ⚠️ 重要提示

### 法律风险

- ❌ **非官方接口**：这些接口未经东方财富官方公开，随时可能失效
- ❌ **仅供学习**：本工具仅供个人学习研究使用
- ❌ **禁止商用**：禁止用于任何商业用途
- ✅ **官方授权**：商业使用请联系东方财富获取授权

### 技术限制

1. **频率限制**
   - 已设置1秒请求间隔
   - 避免频繁请求导致被封IP

2. **数据延迟**
   - 非Level-2行情，存在延迟
   - 不适合高频交易

3. **稳定性**
   - 接口可能随时变化
   - 建议添加容错处理

4. **收盘时间**
   - 交易日 09:30-15:00 有实时数据
   - 收盘后数据可能不完整

### 开发建议

```javascript
// ✅ 添加请求头防止被识别为爬虫
headers: {
  'User-Agent': 'Mozilla/5.0...',
  'Referer': 'http://quote.eastmoney.com/'
}

// ✅ 控制请求频率
await delay(1000);

// ✅ 错误处理
try {
  const data = await fetch(url);
} catch (error) {
  console.error('接口可能已失效', error);
}

// ✅ 数据验证
if (!data || data.rc !== 0) {
  throw new Error('数据格式异常');
}
```

## 🔍 故障排查

### 问题1：显示所有数据为 `-`

**原因**：
- 非交易时间（收盘后、节假日）
- 接口暂时不可用
- 网络问题

**解决方案**：
- 在交易时间（09:30-15:00）重试
- 检查网络连接
- 查看控制台错误信息

### 问题2：请求失败

**原因**：
- 请求频率过高被限流
- IP被封禁
- 接口地址变更

**解决方案**：
- 增加请求间隔（修改 `REQUEST_DELAY`）
- 更换网络环境
- 查看 `eastmoney.md` 获取最新接口

### 问题3：数据不准确

**原因**：
- 非官方接口，可能有延迟
- 数据缓存问题

**解决方案**：
- 与官方数据交叉验证
- 使用专业数据服务（见下方推荐）

## 💡 推荐方案

如果需要稳定、可靠的金融数据，建议使用专业服务：

### Python 数据源

1. **Tushare** - https://tushare.pro
   - 免费 + 付费
   - 数据全面权威
   
2. **AKShare** - https://akshare.akfamily.xyz
   - 完全免费
   - 开箱即用

### 商业数据源

1. **东方财富Choice金融终端**（付费）
2. **Wind万得**（付费，专业机构）
3. **同花顺iFinD**（付费）

## 📚 相关文档

- [东方财富API接口文档](./eastmoney.md)
- [AKShare文档](https://akshare.akfamily.xyz)
- [Tushare文档](https://tushare.pro/document/2)

## 📄 License

MIT License (仅限代码，不包括API使用权)

## 📌 免责声明

本工具仅供技术学习和研究使用，使用过程中产生的任何问题和法律风险由使用者自行承担。

投资有风险，入市需谨慎。本工具不构成任何投资建议。

---

**最后更新**: 2025-10-16  
**作者**: AI Assistant




